<!DOCTYPE html>
<html lang="en">
<head>
    <title>QBin - 个人中心</title>
    <meta charset=UTF-8>
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name=viewport>
    <meta name="theme-color" content="#4a6cf7">
    <meta name="application-name" content="QBin">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="QBin">
    <link href=/static/css/home.css rel=stylesheet>
    <script>
        (function () {
            const savedTheme = localStorage.getItem('qbin-theme') || 'system';
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark-theme');
            } else if (savedTheme === 'light') {
                document.documentElement.classList.add('light-theme');
                // } else if (savedTheme === 'system') {
            } else {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark-theme');
                } else {
                    document.documentElement.classList.add('light-theme');
                }
            }
        })();
    </script>
    <script src=/static/js/utils.js defer></script>
    <script src=/static/js/home.js defer></script>
    <link href=/favicon.ico rel=icon type=image/svg+xml>
    <link rel="manifest" href="/manifest.json" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/static/img/apple-icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/apple-icon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-icon-180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/static/img/apple-icon-167.png">
    <script src=/static/js/pwa-handler.js defer></script>
</head>
<body>
<div class="app-container">
    <div class="sidebar">
        <div class="logo" onclick="location.href='/pwa-loader'" style="cursor: pointer;">
            <img src="/static/img/favicon.svg" alt="QBin Logo">
            <span>QBin</span>
        </div>
        <nav>
            <a href="#editors" class="active">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-home">
                    <path d="M2 10l10-7 10 7M4.5 10.5V20a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-9.5"/>
                    <path d="M10 21v-6h4v6"/>
                </svg>
                <span class="nav-text">首页</span>
            </a>
            <a href="#storage">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-save">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <rect x="8" y="3" width="8" height="6"></rect>
                    <circle cx="12" cy="15" r="3"></circle>
                    <line x1="7" y1="21" x2="17" y2="21"></line>
                </svg>
                <span class="nav-text">存储管理</span>
            </a>
            <a href="#shares">
                <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-link shrink-0">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
                <span class="nav-text">分享记录</span>
            </a>
            <a href="#settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-settings ">
                    <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <span class="nav-text">设置</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <div class="user-profile">
                <div class="user-avatar">
                    <img src="" alt="User Avatar">
                </div>
                <div class="user-info">
                    <span class="username">用户名</span>
                </div>
            </div>
            <a href="#" id="logout-button" class="logout-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-log-out">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                <span class="nav-text">退出登录</span>
            </a>
        </div>
    </div>
    <div class="main-content">
        <section id="editors" class="section active">
            <div class="section-header">
                <div class="header-left">
                    <h2>选择编辑器</h2>
                </div>
            </div>
            <div class="content-wrapper">
                <div class="content-container">
                    <div class="editor-cards">
                        <div class="card" onclick="location.href='/e'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <path d="M17 6.1H3"></path>
                                <path d="M21 12.1H3"></path>
                                <path d="M15.1 18H3"></path>
                            </svg>
                            <h3>通用编辑器</h3>
                            <p>支持文本输入与文件上传</p>
                        </div>
                        <div class="card" onclick="location.href='/c'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <polyline points="16 18 22 12 16 6"></polyline>
                                <polyline points="8 6 2 12 8 18"></polyline>
                            </svg>
                            <h3>Code 编辑器</h3>
                            <p>代码高亮与智能提示</p>
                        </div>
                        <div class="card" onclick="location.href='/m'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <path d="M6 9v6"></path>
                                <path d="M6 9l3 4.5L12 9"></path>
                                <path d="M14 9v6"></path>
                                <path d="M14 9h3.5c1 0 1.5 1 1.5 2v2c0 1-0.5 2-1.5 2H14"></path>
                            </svg>
                            <h3>Markdown 编辑器</h3>
                            <p>所见即所得的编辑体验</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="storage" class="section">
            <div class="section-header">
                <div class="header-left">
                    <div class="search-box">
                        <div class="search-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </div>
                        <input type="text" id="storage-search" placeholder="搜索访问路径..."/>
                    </div>
                </div>
                <div class="header-right">
                    <div class="view-toggle">
                        <button id="list-view-btn" class="view-btn active" title="列表视图">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <line x1="8" y1="6" x2="21" y2="6"></line>
                                <line x1="8" y1="12" x2="21" y2="12"></line>
                                <line x1="8" y1="18" x2="21" y2="18"></line>
                                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                                <line x1="3" y1="18" x2="3.01" y2="18"></line>
                            </svg>
                        </button>
                        <button id="grid-view-btn" class="view-btn" title="网格视图">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="content-wrapper">
                <div class="content-container">
                    <!-- 列表视图 -->
                    <div id="list-view" class="storage-view active">
                        <div class="storage-list">
                            <!-- 列表头部放在存储列表内，但使用sticky保持固定 -->
                            <div class="list-header">
                                <span class="file-name-col">访问路径</span>
                                <span class="file-size-col">大小</span>
                                <span class="file-time-col">修改时间</span>
                                <span class="file-actions-col"></span>
                            </div>
                            <div id="list-items" class="storage-items"></div>
                        </div>
                    </div>

                    <!-- 网格视图 -->
                    <div id="grid-view" class="storage-view">
                        <div class="grid-container" id="grid-items"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="shares" class="section">
            <div class="section-header">
                <div class="header-left">
                    <h2>分享记录</h2>
                </div>
            </div>
            <div class="content-wrapper">
                <div class="content-container">
                    <div class="storage-view active">
                        <div class="share-list">
                            <div class="list-header">
                                <span>访问路径</span>
                                <span>类型</span>
                                <span>修改时间</span>
                                <span></span>
                            </div>
                            <div id="share-items">
                            </div>
                            <div class="error-message">
                                <p>未来计划预留界面，敬请期待</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="settings" class="section">
            <div class="section-header">
                <div class="header-left">
                    <h2>设置</h2>
                </div>
            </div>
            <div class="content-wrapper">
                <div class="content-container">
                    <div class="settings-form">
                        <div class="setting-item editor-selector">
                            <label>默认编辑器</label>
                            <div class="radio-group editor-radio-group">
                                <label class="radio-option" title="通用编辑器">
                                    <input type="radio" name="qbin-editor" value="e">
                                    <span class="radio-label">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"><path d="M17 6.1H3"></path><path d="M21 12.1H3"></path><path
                                            d="M15.1 18H3"></path></svg>
                                </span>
                                </label>
                                <label class="radio-option" title="Code 编辑器">
                                    <input type="radio" name="qbin-editor" value="c">
                                    <span class="radio-label">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline
                                            points="8 6 2 12 8 18"></polyline></svg>
                                </span>
                                </label>
                                <label class="radio-option" title="Markdown 编辑器">
                                    <input type="radio" name="qbin-editor" value="m">
                                    <span class="radio-label">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"
                                                                       ry="2"></rect><path d="M6 9v6"></path><path
                                            d="M6 9l3 4.5L12 9"></path><path d="M14 9v6"></path><path
                                            d="M14 9h3.5c1 0 1.5 1 1.5 2v2c0 1-0.5 2-1.5 2H14"></path></svg>
                                </span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-item theme-selector">
                            <label>主题</label>
                            <div class="radio-group">
                                <label class="radio-option" title="浅色模式">
                                    <input type="radio" name="qbin-theme" value="light">
                                    <span class="radio-label">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12"
                                                                                                              y1="1"
                                                                                                              x2="12"
                                                                                                              y2="3"></line><line
                                            x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64"
                                                                                         y2="5.64"></line><line
                                            x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12"
                                                                                                     x2="3"
                                                                                                     y2="12"></line><line
                                            x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64"
                                                                                         y2="18.36"></line><line
                                            x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                                </span>
                                </label>
                                <label class="radio-option" title="深色模式">
                                    <input type="radio" name="qbin-theme" value="dark">
                                    <span class="radio-label">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"><path
                                            d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                                </span>
                                </label>
                                <label class="radio-option" title="跟随系统">
                                    <input type="radio" name="qbin-theme" value="system">
                                    <span class="radio-label">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"
                                                                       ry="2"></rect><line x1="8" y1="21" x2="16"
                                                                                           y2="21"></line><line x1="12"
                                                                                                                y1="17"
                                                                                                                x2="12"
                                                                                                                y2="21"></line></svg>
                                </span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>API Token</h3>
                            <div class="setting-item">
                                <div class="token-field" id="token-container">
                                    <input type="text" id="token-input" placeholder="点击生成按钮获取API Token"
                                           readonly>
                                    <button id="copy-token-btn" class="icon-btn" title="复制Token" disabled>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                             stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                        </svg>
                                    </button>
                                </div>
                                <button id="generate-token-btn" class="action-btn">生成Token</button>
                            </div>
                            <p class="hint-text">Token仅在生成后显示一次，请妥善保存。用于API访问与第三方应用授权。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
<div id="context-menu" class="context-menu">
    <div class="menu-item" id="menu-view">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
        <span>查看</span>
    </div>
    <div class="menu-item" id="menu-copy-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
        <span>复制链接</span>
    </div>
    <div class="menu-item" id="menu-delete">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
        </svg>
        <span>删除</span>
    </div>
</div>
</body>
</html>